`watch` 的第一个参数可以是不同形式的“数据源”：它可以是一个 ref (包括计算属性)、一个响应式对象、一个 getter 函数、或多个数据源组成的数组

	直接给 `watch()` 传入一个响应式对象，会隐式地创建一个深层侦听器——该回调函数在所有嵌套的变更时都会被触发
	一个返回响应式对象的 getter 函数，只有在返回不同的对象时，才会触发回调

`deep:true` 强制深层侦听器

##### 即时回调的侦听器[​](https://cn.vuejs.org/guide/essentials/watchers.html#eager-watchers)
`watch` 默认是懒执行的：仅当数据源变化时，才会执行回调。
`immediate: true` 选项来强制侦听器的回调立即执行
##### 一次性侦听器 [​](https://cn.vuejs.org/guide/essentials/watchers.html#once-watchers)
每当被侦听源发生变化时，侦听器的回调就会执行。如果希望回调只在源变化时触发一次，请使用 `once: true` 选项。

#### `watchEffect()`
`watchEffect()` 允许我们自动跟踪回调的响应式依赖。自动跟踪回调函数中使用的响应式数据
不需要指定immediate，回调会立刻执行

##### `watch` vs. `watchEffect`[​](https://cn.vuejs.org/guide/essentials/watchers.html#watch-vs-watcheffect)

`watch` 和 `watchEffect` 都能响应式地执行有副作用的回调。它们之间的主要区别是追踪响应式依赖的方式：

- `watch` 只追踪明确侦听的数据源。不会追踪任何在回调中访问到的东西。另外，仅在数据源确实改变时才会触发回调。`watch` 会避免在发生副作用时追踪依赖，因此，我们能更加精确地控制回调函数的触发时机。
    
- `watchEffect`，则会在副作用发生期间追踪依赖。它会在同步执行过程中，自动追踪所有能访问到的响应式属性。这更方便，而且代码往往更简洁，但有时其响应性依赖关系会不那么明确。

#### Post Watchers[​](https://cn.vuejs.org/guide/essentials/watchers.html#post-watchers)

如果想在侦听器回调中能访问被 Vue 更新**之后**的所属组件的 DOM，你需要指明 `flush: 'post'` 选项：
```
watch(source, callback, {
  flush: 'post'
})

watchEffect(callback, {
  flush: 'post'
})
```
后置刷新的 `watchEffect()` 有个更方便的别名 `watchPostEffect()`

##### 同步侦听器[​](https://cn.vuejs.org/guide/essentials/watchers.html#sync-watchers)

你还可以创建一个同步触发的侦听器，它会在 Vue 进行任何更新之前触发：
```
watch(source, callback, {
  flush: 'sync'
})

watchEffect(callback, {
  flush: 'sync'
})
```
同步触发的 `watchEffect()` 有个更方便的别名 `watchSyncEffect()`


#### 停止侦听器[​](https://cn.vuejs.org/guide/essentials/watchers.html#stopping-a-watcher)

在 `setup()` 或 `<script setup>` 中用同步语句创建的侦听器，会自动绑定到宿主组件实例上，并且会在宿主组件卸载时自动停止。

如果用异步回调创建一个侦听器，那么它不会绑定到当前组件上，你必须手动停止它，以防内存泄漏。如下方这个例子：
```
<script setup>
import { watchEffect } from 'vue'

// 它会自动停止
watchEffect(() => {})

// ...这个则不会！
setTimeout(() => {
  watchEffect(() => {})
}, 100)
</script>
```

要手动停止一个侦听器，请调用 `watch` 或 `watchEffect` 返回的函数：
```
const unwatch = watchEffect(() => {})

// ...当该侦听器不再需要时
unwatch()
```