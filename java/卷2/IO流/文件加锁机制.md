要锁定一个文件，可以调用`FileChannel`的`lock`或`tryLock`方法。`lock`和`tryLock`也可以只锁定文件的一部分。
>如果锁定了文件的尾部，在这之后文件的长度增长并超过锁定的部分，那么超出的那部分是未锁定的。要永远锁定文件尾部，可以使用`Long.MAX_VALUE`来表示尺寸

文件被锁定后，直到通道被关闭或者在锁上调用`release`方法。
要确保操作完成后释放锁，最好在一个`try`语句中执行释放锁的操作。
#### 文件加锁机制依赖操作系统
- 在某些系统中文件加锁仅仅是**建议性**的。如果一个应用未能得到锁，他仍然可以向被另一个应用并发锁定的文件执行写操作。
- 在某些系统中，不能在锁定文件的同时将其映射到内存中
- 文件锁是由Java虚拟机持有。在同一个虚拟机上执行的并发任务不可能每个都获取同一个文件的锁。当调用`lock`或`tryLock`方法时，如果虚拟机已经持有该锁，将抛出`OverlappingFileLockException`
- 在一些系统中，关闭一个通道会释放由虚拟机持有的该文件上的所有锁。因此，在同一个锁定文件上应避免使用多个通道。
- 在网络文件系统上锁定文件高度依赖于系统。